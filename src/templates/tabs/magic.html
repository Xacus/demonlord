<ol class="items-list">
    <li class="item-header">
        <div class="spellnameheader">{{localize "DL.MagicTitle"}}</div>
        <div class="spellname"></div>
        <div class="spelltypeheader">{{localize "DL.SpelltypeHeader"}}</div>
        <div class="bonesbanesheader">{{localize "DL.WeaponBoonsBanesShort"}}</div>
        <div class="spellcastingsheader">{{localize "DL.TalentUsesTitle"}}</div>
        <div class="item-controls">
            <a class="item-control spell-create" title="{{localize 'DL.MagicAddSpell'}}" data-type="spell"><i
                    class="fas fa-plus"></i></a>
        </div>
    </li>

    {{#each actor.spellbook as |spellbook id|}}
    <li class="tradition-header">
        <div class="spellnameheader">{{spellbook.tradition}}</div>
        <div class="spellname"></div>
        <div class="spelltypeheader"></div>
        <div class="bonesbanesheader"></div>
        <div class="spellcastingsheader"></div>
    </li>
    {{#each spellbook.spells as |spell id|}}
    <li class="item item-align spell dropitem" data-item-id="{{spell._id}}">
        <div class="item-image">
            <img src="{{spell.img}}" title="{{spell.name}}" width="30" height="30" />
        </div>
        <div class="spellname magic-roll">{{spell.name}}</div>
        <div class="spelltype">{{data.spelltype}} {{data.rank}}</div>
        <div class="bonesbanes">
            {{#if data.action.boonsbanes}}{{numberFormat data.action.boonsbanes decimals=0 sign=true}}{{else}}+0{{/if}}
        </div>
        <div class="spellcastings spell-uses">{{#if data.castings.max}}{{data.castings.value}} /
            {{data.castings.max}} <i class="fas fa-arrows-alt-v"></i>{{/if}}</div>
        <div class="toggleInfo"><i class="fas fa-angle-right"></i> {{localize "DL.SpellShowSpellInfo"}}
        </div>
        <div class="spellinfo" style="display: none;">
            {{#if data.action.damage}}
            <b>{{localize "DL.WeaponDamage"}}:</b> {{data.action.damage}} ({{data.action.damagetype}})<br>
            {{/if}}
            {{#each data.damagetypes as |damagetype id|}}
            <b>{{localize 'DL.WeaponDamage'}}:</b> {{damagetype.damage}} ({{damagetype.damagetype}})<br>
            {{/each}}
            {{#if data.action.defense}}
            <b>{{localize "DL.SpellTypeDefense"}}</b>
            {{localize "DL.ChallengeRoll"}}: {{data.action.defense}}
            {{#if data.action.defenseboonsbanes}}({{data.action.defenseboonsbanes}}){{/if}}<br>
            {{/if}}
            {{#if data.healing.healing}}
            <b>{{localize 'DL.TalentHealingOptions'}}</b>
            {{/if}}
            {{#if data.target}}
            <b>{{localize "DL.SpellTarget"}}:</b> {{data.target}}<br>
            {{/if}}
            {{#if data.area}}
            <b>{{localize "DL.SpellArea"}}:</b> {{data.area}}<br>
            {{/if}}
            {{#if data.duration}}
            <b>{{localize "DL.SpellDuration"}}:</b> {{data.duration}}<br>
            {{/if}}
            {{#if data.requirements}}
            <b>{{localize "DL.SpellRequirements"}}:</b> {{data.requirements}}<br>
            {{/if}}
            {{#if data.sacrifice}}
            <b>{{localize "DL.SpellSacrifice"}}:</b> {{data.sacrifice}}<br>
            {{/if}}
            {{#if data.permanence}}
            <b>{{localize "DL.SpellPermanence"}}:</b> {{data.permanence}}<br>
            {{/if}}
            {{#if data.aftereffect}}
            <b>{{localize "DL.SpellAftereffect"}}:</b> {{data.aftereffect}}<br>
            {{/if}}
            {{#if data.special}}
            <b>{{localize "DL.SpellSpecial"}}:</b> {{data.special}}<br>
            {{/if}}
            {{#if data.triggered}}
            <b>{{localize "DL.SpellTriggered"}}:</b> {{data.triggered}}<br>
            {{/if}}
            {{#if data.action.plus20damage}}
            <b>{{localize "DL.WeaponAttack20"}}:</b> {{data.action.plus20damage}}<br>
            {{/if}}
            {{#if data.action.plus20}}
            <b>{{localize "DL.WeaponAttack20Text"}}:</b> {{data.action.plus20}}<br>
            {{/if}}
            {{#if data.description}}
            {{{data.description}}}
            {{/if}}
        </div>
        <div class="item-controls">
            <a class="item-control spell-edit" title="{{localize 'DL.MagicEditSpell'}}"><i class="fas fa-edit"></i></a>
            <a class="item-control spell-delete" title="{{localize 'DL.MagicDeleteSpell'}}"><i
                    class="fas fa-trash"></i></a>
        </div>
    </li>
    {{/each}}
    {{/each}}
</ol>