{{!--
  Variables:
    - data
      - roll
      - resultBoxClass
      - attack
      - against
      - diceTotal
      - diceTotalGM
      - isCreature
      - isBlindedRoll
      - againstNumber
      - againstNumberGM

    - diceData
      - dice
      - color
      - result
      - img
 --}}

{{#if data.roll}}
  <div class="result">
    <div class="box {{data.resultBoxClass}}">
      <div class="valuetext">
        {{#if data.against}}
          {{data.attack}}
        {{else}}
          {{localize "DL.TalentRollText"}}
        {{/if}}
      </div>
      <div class="boxborder tooltip">
        <div class="value">
          <div class="gmremove">{{data.diceTotal}}</div>
          <div class="gmonlyzero">{{data.diceTotalGM}}</div>
        </div>
        {{#if data.isCreature}}
          <div class="owneronly">
            <span class="tooltiptext">
              {{#each diceData.dice}}
                <div class="{{#if this.dice}}dice{{else}}modifier{{/if}}">
                  <label style="color:{{this.color}};">
                    {{this.result}}
                  </label>
                  {{#if this.img}}
                    <img src='{{this.img}}' />
                  {{/if}}
                </div>
              {{/each}}
            </span>
          </div>
        {{else}}
          {{#if data.ifBlindedRoll }}
          <div class="gmonly">
            {{/if}}
              <span class="tooltiptext">
                {{#each diceData.dice}}
                  <div class="{{#if this.dice}}dice{{else}}modifier{{/if}}">
                    <label style="color:{{this.color}};">
                      {{this.result}}
                    </label>
                    {{#if this.img}}
                    <img src='{{this.img}}' />
                    {{/if}}
                  </div>
                {{/each}}
              </span>
            {{#if data.ifBlindedRoll }}
          </div>
          {{/if}}
        {{/if}}
      </div>
    </div>
    {{#if data.against}}
      <div class="boxvs">
        <div class="vs">{{localize "DL.ChallengeVS"}}</div>
      </div>
      <div class="box {{data.resultBoxClass}}">
        <div class="valuetext">{{data.against}}</div>
        <div class="boxborderTarget">
          <div class="value">
            <div class="gmremove">{{data.againstNumber}}</div>
            <div class="gmonlyzero">{{data.againstNumberGM}}</div>
          </div>
        </div>
      </div>
    {{/if}}
  </div>
{{/if}}

{{#if data.attackEffects}}
  {{#if data.isCreature}}
    <div class="owneronly">
      <div class="description">
        <div class="header">{{localize "DL.AttackRollBonuses"}}:</div>
        <div class="body">{{{data.attackEffects}}}
          <hr>
        </div>
      </div>
    </div>
  {{else}}
    <div class="description">
      <div class="header">{{localize "DL.AttackRollBonuses"}}:</div>
      <div class="body">{{{data.attackEffects}}}
        <hr>
      </div>
    </div>
  {{/if}}
{{/if}}

{{#if data.effects}}
  {{#if data.isCreature}}
    <div class="owneronly">
      <div class="description">
        <div class="header">{{localize "DL.TalentRollEffects"}}</div>
        <div class="body">{{{data.effects}}}</div>
      </div>
    </div>
  {{else}}
    <div class="description">
      <div class="header">{{localize "DL.TalentRollEffects"}}</div>
      <div class="body">{{{data.effects}}}</div>
    </div>
  {{/if}}
{{/if}}

{{#if data.effectdice}}
  <div class="roll20">
    <div class="header">{{localize "DL.SpellEffectDice"}}</div>
    <div class="body">{{localize "DL.SpellEffectDiceResult"}} {{data.effectdice}}</div>
  </div>
{{/if}}
{{#if data.plus20Text}}
  <div class="roll20">
    <div class="header">{{localize "DL.SpellRollPlus20"}}</div>
    <div class="body">{{data.plus20Text}}</div>
  </div>
{{/if}}
